<h2>Importar planilha</h2>
<app-file-upload (fileChange)="onFile($event)"></app-file-upload>

<form class="import-form" (ngSubmit)="upload()">
  <label>
    Tipo do arquivo
    <select [(ngModel)]="kind" name="kind">
      <option value="EXTRATO">Extrato</option>
      <option value="FATURA">Fatura</option>
    </select>
  </label>

  <label>
    Origem (source)
    <input type="text" [(ngModel)]="source" name="source" placeholder="ex.: nubank_csv">
  </label>

  <label>
    Conta (opcional)
    <input type="text" [(ngModel)]="account" name="account" placeholder="ex.: nubank">
  </label>

  <button type="submit" [disabled]="loading()">Importar</button>
</form>

<p *ngIf="loading()">Enviando...</p>
<p *ngIf="error()" class="error">{{ error() }}</p>

<div *ngIf="result()" class="result">
  <h3>Importação concluída</h3>
  <ul>
    <li>Batch: {{ result()?.batchId }}</li>
    <li>Importados: {{ result()?.imported }}</li>
    <li>Duplicados: {{ result()?.duplicates }}</li>
    <li>Erros: {{ result()?.errors }}</li>
  </ul>
</div>
